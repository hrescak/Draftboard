{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/server/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const db =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log:\n      process.env.NODE_ENV === \"development\"\n        ? [\"query\", \"error\", \"warn\"]\n        : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KACE,uCACI;QAAC;QAAS;QAAS;KAAO,GAC1B;AACR;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/server/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\nimport Credentials from \"next-auth/providers/credentials\";\nimport { compare } from \"bcryptjs\";\nimport { z } from \"zod\";\nimport { db } from \"~/server/db\";\n\nconst credentialsSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n});\n\nexport const { handlers, auth, signIn, signOut } = NextAuth({\n  session: {\n    strategy: \"jwt\",\n  },\n  pages: {\n    signIn: \"/sign-in\",\n  },\n  callbacks: {\n    jwt({ token, user }) {\n      if (user) {\n        token.id = user.id;\n        token.role = user.role;\n      }\n      return token;\n    },\n    session({ session, token }) {\n      if (token && session.user) {\n        session.user.id = token.id as string;\n        session.user.role = token.role as \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n      }\n      return session;\n    },\n  },\n  providers: [\n    Credentials({\n      name: \"credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials) {\n        const parsed = credentialsSchema.safeParse(credentials);\n        if (!parsed.success) {\n          return null;\n        }\n\n        const { email, password } = parsed.data;\n\n        const user = await db.user.findUnique({\n          where: { email },\n        });\n\n        if (!user || !user.passwordHash) {\n          return null;\n        }\n\n        const isValid = await compare(password, user.passwordHash);\n        if (!isValid) {\n          return null;\n        }\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.displayName,\n          image: user.avatarUrl,\n          role: user.role,\n        };\n      },\n    }),\n  ],\n});\n\ndeclare module \"next-auth\" {\n  interface User {\n    role: \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n  }\n\n  interface Session {\n    user: {\n      id: string;\n      email: string;\n      name: string;\n      image?: string | null;\n      role: \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n    };\n  }\n}\n\ndeclare module \"next-auth\" {\n  interface JWT {\n    id: string;\n    role: \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,oBAAoB,uKAAC,CAAC,MAAM,CAAC;IACjC,OAAO,uKAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC3B;AAEO,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,gKAAQ,EAAC;IAC1D,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACjB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,OAAO;QACT;QACA,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YACxB,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACzB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAChC;YACA,OAAO;QACT;IACF;IACA,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,MAAM,SAAS,kBAAkB,SAAS,CAAC;gBAC3C,IAAI,CAAC,OAAO,OAAO,EAAE;oBACnB,OAAO;gBACT;gBAEA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,IAAI;gBAEvC,MAAM,OAAO,MAAM,yHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;oBACpC,OAAO;wBAAE;oBAAM;gBACjB;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,YAAY,EAAE;oBAC/B,OAAO;gBACT;gBAEA,MAAM,UAAU,MAAM,IAAA,4IAAO,EAAC,UAAU,KAAK,YAAY;gBACzD,IAAI,CAAC,SAAS;oBACZ,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,WAAW;oBACtB,OAAO,KAAK,SAAS;oBACrB,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;AACH","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/components/layout/main-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const MainNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call MainNav() from the server but MainNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layout/main-nav.tsx <module evaluation>\",\n    \"MainNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,oEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/components/layout/main-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const MainNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call MainNav() from the server but MainNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layout/main-nav.tsx\",\n    \"MainNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/components/layout/user-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const UserNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call UserNav() from the server but UserNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layout/user-nav.tsx <module evaluation>\",\n    \"UserNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,oEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/components/layout/user-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const UserNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call UserNav() from the server but UserNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layout/user-nav.tsx\",\n    \"UserNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/app/%28main%29/layout.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\";\nimport { auth } from \"~/server/auth\";\nimport { MainNav } from \"~/components/layout/main-nav\";\nimport { UserNav } from \"~/components/layout/user-nav\";\n\nexport default async function MainLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const session = await auth();\n\n  if (!session?.user) {\n    redirect(\"/sign-in\");\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-50 border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n        <div className=\"mx-auto flex h-14 max-w-6xl items-center justify-between px-4\">\n          <div className=\"flex items-center gap-6\">\n            <a href=\"/\" className=\"flex items-center gap-2\">\n              <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-primary\">\n                <span className=\"text-lg font-bold text-primary-foreground\">\n                  D\n                </span>\n              </div>\n              <span className=\"hidden font-semibold sm:inline-block\">\n                Draftboard\n              </span>\n            </a>\n            <MainNav />\n          </div>\n          <UserNav user={session.user} />\n        </div>\n      </header>\n      <main className=\"mx-auto max-w-6xl px-4 py-6\">{children}</main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;AACA;;;;;;AAEe,eAAe,WAAW,EACvC,QAAQ,EAGT;IACC,MAAM,UAAU,MAAM,IAAA,6HAAI;IAE1B,IAAI,CAAC,SAAS,MAAM;QAClB,IAAA,iMAAQ,EAAC;IACX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,MAAK;oCAAI,WAAU;;sDACpB,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAK,WAAU;0DAA4C;;;;;;;;;;;sDAI9D,8OAAC;4CAAK,WAAU;sDAAuC;;;;;;;;;;;;8CAIzD,8OAAC,sJAAO;;;;;;;;;;;sCAEV,8OAAC,sJAAO;4BAAC,MAAM,QAAQ,IAAI;;;;;;;;;;;;;;;;;0BAG/B,8OAAC;gBAAK,WAAU;0BAA+B;;;;;;;;;;;;AAGrD","debugId":null}}]
}