{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/server/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const db =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log:\n      process.env.NODE_ENV === \"development\"\n        ? [\"query\", \"error\", \"warn\"]\n        : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KACE,uCACI;QAAC;QAAS;QAAS;KAAO,GAC1B;AACR;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/server/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\nimport Credentials from \"next-auth/providers/credentials\";\nimport { compare } from \"bcryptjs\";\nimport { z } from \"zod\";\nimport { db } from \"~/server/db\";\n\nconst credentialsSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n});\n\nexport const { handlers, auth, signIn, signOut } = NextAuth({\n  session: {\n    strategy: \"jwt\",\n  },\n  pages: {\n    signIn: \"/sign-in\",\n  },\n  callbacks: {\n    jwt({ token, user }) {\n      if (user) {\n        token.id = user.id;\n        token.role = user.role;\n      }\n      return token;\n    },\n    session({ session, token }) {\n      if (token && session.user) {\n        session.user.id = token.id as string;\n        session.user.role = token.role as \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n      }\n      return session;\n    },\n  },\n  providers: [\n    Credentials({\n      name: \"credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials) {\n        const parsed = credentialsSchema.safeParse(credentials);\n        if (!parsed.success) {\n          return null;\n        }\n\n        const { email, password } = parsed.data;\n\n        const user = await db.user.findUnique({\n          where: { email },\n        });\n\n        if (!user || !user.passwordHash) {\n          return null;\n        }\n\n        const isValid = await compare(password, user.passwordHash);\n        if (!isValid) {\n          return null;\n        }\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.displayName,\n          image: user.avatarUrl,\n          role: user.role,\n        };\n      },\n    }),\n  ],\n});\n\ndeclare module \"next-auth\" {\n  interface User {\n    role: \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n  }\n\n  interface Session {\n    user: {\n      id: string;\n      email: string;\n      name: string;\n      image?: string | null;\n      role: \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n    };\n  }\n}\n\ndeclare module \"next-auth\" {\n  interface JWT {\n    id: string;\n    role: \"MEMBER\" | \"ADMIN\" | \"OWNER\";\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,oBAAoB,yKAAC,CAAC,MAAM,CAAC;IACjC,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC3B;AAEO,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,kKAAQ,EAAC;IAC1D,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACjB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,OAAO;QACT;QACA,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YACxB,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACzB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAChC;YACA,OAAO;QACT;IACF;IACA,WAAW;QACT,IAAA,uKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,MAAM,SAAS,kBAAkB,SAAS,CAAC;gBAC3C,IAAI,CAAC,OAAO,OAAO,EAAE;oBACnB,OAAO;gBACT;gBAEA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,IAAI;gBAEvC,MAAM,OAAO,MAAM,2HAAE,CAAC,IAAI,CAAC,UAAU,CAAC;oBACpC,OAAO;wBAAE;oBAAM;gBACjB;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,YAAY,EAAE;oBAC/B,OAAO;gBACT;gBAEA,MAAM,UAAU,MAAM,IAAA,8IAAO,EAAC,UAAU,KAAK,YAAY;gBACzD,IAAI,CAAC,SAAS;oBACZ,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,WAAW;oBACtB,OAAO,KAAK,SAAS;oBACrB,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;AACH","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Users/matejhrescak/src/draftboard/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import { handlers } from \"~/server/auth\";\n\nexport const { GET, POST } = handlers;\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,mIAAQ","debugId":null}}]
}